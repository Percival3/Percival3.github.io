---
import Layout from '../../layouts/Layout.astro';
import { getRelativeLocaleUrl } from 'astro:i18n';
import { Github, Mail, ChevronDown } from 'lucide-react';
import QuoteCarousel from '../../components/QuoteCarousel';

export function getStaticPaths() {
  return [
    { params: { lang: 'zh' } },
    { params: { lang: 'en' } },
    { params: { lang: 'ja' } },
  ];
}

const { lang } = Astro.params;

const fixedHeroQuotes = [
  { text: '头顶的星空和心中的律令', sub: '' },
  { text: '理性作为存在', sub: '' },
  { text: 'Stand Alone Complex', sub: '' },
  { text: 'Cogito ergo sum', sub: 'René Descartes' },
];

const translations = {
  zh: {
    scrollLabel: '查看详情',
  },
  en: {
    scrollLabel: 'Details',
  },
  ja: {
    scrollLabel: '詳細を見る',
  },
};

const t = translations[lang as keyof typeof translations] || translations.zh;
const aboutUrl = getRelativeLocaleUrl(lang, 'about');
---

<Layout title="Home" lang={lang}>
  <section
    class="relative mx-auto max-w-6xl px-4 sm:px-6"
    style="min-height: var(--hero-scene-height, calc(100vh - 8rem)); padding-top: calc(var(--nav-height, 56px) + 2rem); padding-bottom: clamp(5rem, 10vw, 7rem);"
  >
    <div class="relative mx-auto flex max-w-4xl flex-col items-center text-center animate-in fade-in zoom-in duration-700">
      <div class="relative mb-6 md:mb-8">
        <div class="absolute -inset-1 rounded-full bg-gradient-to-r from-blue-400/85 to-violet-400/85 blur-md"></div>
        <img
          src="/self_oc.png"
          alt="Portrait"
          class="relative h-28 w-28 rounded-full border-4 border-white/90 object-cover shadow-2xl md:h-32 md:w-32"
        />
      </div>

      <div class="glass-card quote-panel w-full max-w-3xl rounded-[30px] px-7 py-5 md:px-12 md:py-6">
        <QuoteCarousel client:load quotes={fixedHeroQuotes} />
      </div>

      <div class="mt-7 flex items-center gap-3 md:mt-9">
        <a
          href="https://github.com"
          target="_blank"
          rel="noreferrer"
          aria-label="GitHub"
          class="home-icon-btn"
        >
          <Github className="h-5 w-5" />
        </a>
        <a
          href="mailto:contact@example.com"
          aria-label="Mail"
          class="home-icon-btn"
        >
          <Mail className="h-5 w-5" />
        </a>
      </div>

      <a
        href={aboutUrl}
        class="mt-8 inline-flex flex-col items-center gap-1 text-[#efe3d1] transition-opacity hover:opacity-75"
        aria-label={t.scrollLabel}
      >
        <span class="text-xs tracking-[0.24em] uppercase">{t.scrollLabel}</span>
        <ChevronDown className="h-6 w-6 animate-bounce" />
      </a>
    </div>

    <div aria-hidden class="pointer-events-none absolute inset-x-0 bottom-0 translate-y-[98%]">
      <svg viewBox="0 0 1440 180" class="h-[68px] w-full md:h-[92px]">
        <path
          class="fill-white/88 dark:fill-slate-950/80"
          d="M0,96L60,85.3C120,75,240,53,360,53.3C480,53,600,75,720,90.7C840,107,960,117,1080,112C1200,107,1320,85,1380,74.7L1440,64L1440,181L1380,181C1320,181,1200,181,1080,181C960,181,840,181,720,181C600,181,480,181,360,181C240,181,120,181,60,181L0,181Z"
        ></path>
      </svg>
    </div>
  </section>
</Layout>

<style>
  .home-icon-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: 2.75rem;
    width: 2.75rem;
    border-radius: 9999px;
    border: 1px solid rgba(255, 255, 255, 0.42);
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.58),
      rgba(255, 255, 255, 0.28)
    );
    color: #f8f2e8;
    backdrop-filter: blur(10px) saturate(120%);
    -webkit-backdrop-filter: blur(10px) saturate(120%);
    transition: transform 220ms ease, opacity 220ms ease;
    box-shadow: 0 10px 24px rgba(15, 23, 42, 0.2);
  }

  .home-icon-btn:hover {
    transform: translateY(-2px) scale(1.03);
    opacity: 0.92;
  }

  :global(html.dark) .home-icon-btn {
    border-color: rgba(125, 221, 255, 0.34);
    background: linear-gradient(
      to bottom,
      rgba(6, 20, 45, 0.58),
      rgba(6, 20, 45, 0.3)
    );
    color: #d6f3ff;
    box-shadow: 0 12px 28px rgba(1, 9, 26, 0.46);
  }

  .quote-panel {
    animation: quote-float 6s ease-in-out infinite;
    will-change: transform;
  }

  @keyframes quote-float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-7px);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .quote-panel {
      animation: none;
    }
  }
</style>
